<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/my/layout/myLayout.html}">



            <div class="home" layout:fragment="content">

                <script>
                    // 클릭 이벤트 처리 함수
                    function preventClick(event, element) {
                        event.preventDefault(); // 기본 동작 중지
                        console.log(event);
                        console.log(element.getAttribute('data-bannerNo'));//이렇게 함수에 bannerNo를 담아서 옴
                        console.log(element.getAttribute('data-link'));//link주소도 받아와짐

                        const bannerNo = element.getAttribute('data-bannerNo');
                        const link = element.getAttribute('data-link');


                        const jsonData = {
                            "bannerNo":bannerNo,
                            "link":link
                        }

                        fetch("/lotteshop/main/index",{
                            method:'POST',
                            headers:{'Content-Type': 'application/json'},
                            body:JSON.stringify(jsonData)
                        })
                            .then(response=>{
                                if(!response.ok){
                                    throw new Error('데이터 전송에 실패!');
                                }else{
                                    window.location.href=link;
                                }
                                return response.json();
                            })
                            .then(data =>{
                                console.log(data);
                            })
                            .catch(err=>console.log(err))
                    }

                </script>

				<ul>
                    <span class="menu_else"></span>
                    <li><a th:href="@{/my/order}">전체주문내역</a></li>
                    <!--<li><a href="./favorite.html">관심상품</a></li>-->
                    <li><a th:href="@{/my/point}">포인트내역</a></li>
                    <li><a th:href="@{/my/coupon}">쿠폰</a></li>
                    <li><a th:href="@{/my/review}">나의리뷰</a></li>
                    <li><a th:href="@{/my/qna}">문의하기</a></li>
                    <li><a th:href="@{/my/info}">나의설정</a></li>
                </ul>

                <section>
                    <th:block th:each="banner :${banner5}">
                        <a th:if="${banner.status} == 1" th:data-bannerNo="${banner.bannerNo}" th:data-link="${banner.link}" th:onclick="'preventClick(event ,this)'" th:href="@{${banner.link}}">
                            <img th:src="@{/uploads/__${banner.img_810}__}" alt="패션, 타운 하나로 끝" class="banner">
                        </a>
                    </th:block>
                    <article class="latest">
                        <h3>최근주문내역</h3>
                        <a th:href="@{/my/order}" class="more">더보기</a>
                        <table border="0">
                            <tr>
                                <th>날짜</th>
                                <th>상품정보</th>
                                <th>상태</th>
                                <th>확인/신청</th>
                            </tr>
                            <tr>
                                <td class="date">2022-12-13</td>
                                <td class="info">
                                    <a th:href="@{#}" class="thumb"><img src="https://via.placeholder.com/80x80" alt=""></a>
                                    <ul>
                                        <li class="company"><a th:href="@{#}">상호명</a></li>
                                        <li class="prodName"><a th:href="@{#}">상품명</a></li>
                                        <li class="orderNo">수량 : <span class="prodCount">1</span>개 / 주문번호 : <a th:href="@{#}">1012211341</a></li>
                                        <li class="prodPrice">34,000</li>
                                    </ul>
                                </td>
                                <td class="status">배송완료</td>
                                <td class="confirm">
                                    <a th:href="@{#}" class="receive">수취확인</a>
                                    <a th:href="@{#}" class="review">상품평</a>
                                    <a th:href="@{#}" class="refund">반품신청</a>
                                    <a th:href="@{#}" class="exchange">교환신청</a>
                                </td>
                            </tr>
                        </table>
                    </article>

                    <article class="point">
                        <h3>포인트내역</h3>
                        <a th:href="@{/my/point}"   class="more">더보기</a>
                        <table border="0">
                            <tr>
                            <tr>
                                <th>날짜</th>
                                <th>구분</th>
                                <th>주문번호</th>
                                <th>적립(차감)내역</th>
                                <th>비고</th>
                                <th>유효기간</th>
                            </tr>
                            <th:block th:each="point , index:${points}"  th:if="${index.index <3}">
                            <tr style="text-align: center">
                                <td >[[${#temporals.format(point.pointDate , 'yyyy-MM-dd')}]]</td>
                                <td>[[${point.state}]]</td>
                                <td>[[${point.orderNo}]]</td>
                                <td>[[${point.point}]]</td>
                                <td>[[${point.pointDesc}]]</td>
                                <td >[[${point.endDateTime}]]</td>
                            </tr>
                            </th:block>
                        </table>

                    </article>
                    <article class="review">
                        <h3>상품평</h3>
                        <a th:href="@{#}" class="more">더보기</a>
                        <table border="0">
                            <tr>
                                <th>번호</th>
                                <th>상품명</th>
                                <th>내용</th>
                                <th>평점</th>
                                <th>작성일</th>
                            </tr>
                            <tr>
                                <td>1</td>
                                <td>상품명</td>
                                <td>배송이 빠릅니다. 잘 사용하겠습니다.</td>
                                <td><span class="rating star1">상품평</span></td>
                                <td>2022-12-10</td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>상품명</td>
                                <td>배송이 빠릅니다. 잘 사용하겠습니다.</td>
                                <td><span class="rating star2">상품평</span></td>
                                <td>2022-12-10</td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>상품명</td>
                                <td>배송이 빠릅니다. 잘 사용하겠습니다.</td>
                                <td><span class="rating star3">상품평</span></td>
                                <td>2022-12-10</td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>상품명</td>
                                <td>배송이 빠릅니다. 잘 사용하겠습니다.</td>
                                <td><span class="rating star4">상품평</span></td>
                                <td>2022-12-10</td>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>상품명</td>
                                <td>배송이 빠릅니다. 잘 사용하겠습니다.</td>
                                <td><span class="rating star5">상품평</span></td>
                                <td>2022-12-10</td>
                            </tr>
                        </table>
                    </article>

                    <article class="qna">
                        <h3>문의내역</h3>
                        <a th:href="@{#}" class="more">더보기</a>
                        <table border="0">
                            <tr>
                                <th>번호</th>
                                <th>문의채널</th>
                                <th>문의유형</th>                                
                                <th>제목</th>
                                <th>작성일</th>
                                <th>상태</th>
                            </tr>
                            <tr>
                                <td>5</td>
                                <td>고객센터</td>
                                <td>주문/결제</td>                                
                                <td>신용카드 결제 중 오류가 난 경우 어떻게 하나요?</td>
                                <td>2024-12-12</td>
                                <td><span class="notAnswerYet">검토중</span></td>
                            </tr>
                            <tr>
                                <td>4</td>
                                <td>고객센터</td>
                                <td>주문/결제</td>                                
                                <td>신용카드 결제 중 오류가 난 경우 어떻게 하나요?</td>
                                <td>2024-12-12</td>
                                <td><span class="answered">답변완료</span></td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>판매자게시판</td>
                                <td>배송</td>                                
                                <td>배송기간이 보통 얼마나 걸리나요?</td>
                                <td>2024-12-12</td>
                                <td><span class="answered">답변완료</span></td>
                            </tr>
                        </table>
                    </article>

                    <article class="myinfo">
                        <h3>확인해주세요!</h3>

                        <div>
                            <div class="address">
                                <span>기본 배송지설정</span>
                                <a th:href="@{#}" class="setting">변경</a>
                            </div>
                            <div class="email">
                                <span>email 설정</span>
                                <a th:href="@{#}" class="setting">변경</a>
                                <p>
                                    <span>abc123@gmail.com</span><br/>
                                    (최종수정일 <span>2021-12-10</span>)
                                </p>
                            </div>
                            <div class="hp">
                                <span>휴대폰 설정</span>
                                <a th:href="@{#}" class="setting">변경</a>
                                <p>
                                    <span>abc123@gmail.com</span><br/>
                                    (최종수정일 <span>2021-12-10</span>)
                                </p>
                            </div>
                        </div>


                    </article>

                </section>

            </div>


    </div>    
</body>
</html>