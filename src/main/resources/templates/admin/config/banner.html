<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/admin/layout/adminLayout.html}">

<section id="admin-config-banner" layout:fragment="content">
    <script>

        window.onload = function () {

            const b_delete = document.getElementById('delete');
            const checkBoxes = document.querySelectorAll('.checkBoxes');

            b_delete.onclick = function (e) {
                e.preventDefault();

                deleteSelectedBanners();
            }

            //전체 선택

            const totalCheckBox = document.getElementsByName('all')[0];
            let checkedTurn = 0;

            totalCheckBox.onclick = function (e) {
                if (checkedTurn === 0) {
                    checkBoxes.forEach(function (checkbox) {
                        checkbox.checked = true;
                    });
                    checkedTurn = 1;
                } else {
                    checkBoxes.forEach(function (checkbox) {
                        checkbox.checked = false;
                    });
                    checkedTurn = 0;
                }

            }


            function deleteSelectedBanners() {

                checkBoxes.forEach(check => {
                    if (check.checked) {
                        const row = check.closest('tr');
                        const bannerNo = row.querySelector('[id="bannerNo"]').textContent;
                        // 배너번호를 확인
                        console.log('BannerNo : ' + bannerNo);//배너번호 잘 찍힘
                        row.remove();

                        const jsonData = {
                            "bannerNo" :bannerNo
                        };

                        fetch("/lotteshop/banner/delete", {
                            method: 'POST',
                            headers: {'Content-Type': 'application/json'},
                            body: JSON.stringify(jsonData)
                        })
                            .then(response => {
                                if (response.ok) {
                                    console.log("삭제가 성공!여기는 banner.html");
                                } else {
                                    throw new Error("삭제 실패");
                                }
                            })
                            .catch(err => console.log(err));
                    }
                });
            }


        }


    </script>

    <nav>
        <h3>배너관리</h3>
        <p>
            HOME > 환경설정 > <strong>배너관리</strong>
        </p>
    </nav>
    <article id="tabs">
        <ul>
            <li><a href="#tabs1">메인 상단 배너</a></li>
            <li><a href="#tabs2">메인 슬라이더 배너</a></li>
            <li><a href="#tabs3">상품 상세보기 배너</a></li>
            <li><a href="#tabs4">회원 로그인 배너</a></li>
            <li><a href="#tabs5">마이페이지 배너</a></li>
        </ul>

        <!-- 메인 상단 배너-->
        <section id="tabs1">
            <h4>메인 상단배너</h4>
            <p>
                쇼핑몰 메인 상단에 출력되는 배너입니다.
            </p>
            <table>
                <tr>
                    <th><input type="checkbox" name="all"/></th>
                    <th>배너번호</th>
                    <th>이미지</th>
                    <th>배너정보</th>
                    <th>배너위치</th>
                    <th>시작날짜</th>
                    <th>종료날짜</th>
                    <th>시작시간</th>
                    <th>종료시간</th>
                    <th>조회</th>
                    <th>관리</th>
                </tr>

                <tr th:each=" bannerList :${banner}">
                    <td><input type="checkbox" name="배너번호" class="checkBoxes"/></td>
                    <td th:text="${bannerList.bannerNo}" id="bannerNo">201603292</td>
                    <td><img th:src="@{/uploads/__${bannerList.img_1200}__}" class="thumb"></td>
                    <td>
                        <ul>
                            <li class="name" th:text="${bannerList.name}">배너이름</li>
                            <li class="size">크기 : 1200 x 80</li>
                            <li class="size" th:text="${bannerList.color}">배경색 : #e4dfdf</li>
                            <li class="link" th:text="${bannerList.link}"><a href="#">배너링크</a></li>
                        </ul>
                    </td>
                    <td>메인 - 상단</td>
                    <td th:text="${bannerList.d_begin}">2023/01/01</td>
                    <td th:text="${bannerList.d_end}">2023/01/07</td>
                    <td th:text="${bannerList.t_begin}">13:00</td>
                    <td th:text="${bannerList.t_end}">14:00</td>
                    <td th:text="${bannerList.hit}">12</td>
                    <td>
                        <a th:href="@{/banner/inactive}">[비활성]</a>
                        <a th:href="@{'/banner/active?bannerNo='+${bannerList.bannerNo}}" class="activeButton">[활성]</a>
                    </td>
                </tr>
            </table>
            <input type="button" class="btnNegative" id="delete" value="선택삭제"/>
            <input type="button" class="btnPositive btnRegister" value="등록하기"/>

        </section>

        <!-- 메인 슬라이더 배너-->
        <section id="tabs2">
            <h4>메인 슬라이더배너</h4>
            <p>
                쇼핑몰 메인 슬라이더 영역에 노출되는 배너입니다.
            </p>
            <table>
                <tr>
                    <th><input type="checkbox" name="all"/></th>
                    <th>배너번호</th>
                    <th>이미지</th>
                    <th>배너정보</th>
                    <th>배너위치</th>
                    <th>시작날짜</th>
                    <th>종료날짜</th>
                    <th>시작시간</th>
                    <th>종료시간</th>
                    <th>조회</th>
                    <th>관리</th>
                </tr>
                <tr>
                    <td><input type="checkbox" name="배너번호"/></td>
                    <td>201603292</td>
                    <td><img th:src="@{/images/slider_item1.jpg}" class="thumb"></td>
                    <td>
                        <ul>
                            <li class="name">배너이름</li>
                            <li class="size">크기 : 985 x 447</li>
                            <li class="link"><a href="#">배너링크</a></li>
                        </ul>
                    </td>
                    <td>메인 - 슬라이더</td>
                    <td>2023/01/01</td>
                    <td>2023/01/07</td>
                    <td>13:00</td>
                    <td>14:00</td>
                    <td>12</td>
                    <td>
                        <a href="#">[비활성]</a>
                        <a href="#">[활성]</a>
                    </td>
                </tr>
                <tr>
                    <td><input type="checkbox" name="배너번호"/></td>
                    <td>201603292</td>
                    <td><img src="../../images/slider_item2.jpg" class="thumb"></td>
                    <td>
                        <ul>
                            <li class="name">배너이름</li>
                            <li class="size">크기 : 985 x 447</li>
                            <li class="link"><a href="#">배너링크</a></li>
                        </ul>
                    </td>
                    <td>메인 - 슬라이더</td>
                    <td>2023/01/01</td>
                    <td>2023/01/07</td>
                    <td>13:00</td>
                    <td>14:00</td>
                    <td>12</td>
                    <td>
                        <a href="#">[비활성]</a>
                        <a href="#">[활성]</a>
                    </td>
                </tr>
                <tr>
                    <td><input type="checkbox" name="배너번호"/></td>
                    <td>201603292</td>
                    <td><img src="../../images/slider_item3.jpg" class="thumb"></td>
                    <td>
                        <ul>
                            <li class="name">배너이름</li>
                            <li class="size">크기 : 985 x 447</li>
                            <li class="link"><a href="#">배너링크</a></li>
                        </ul>
                    </td>
                    <td>메인 - 슬라이더</td>
                    <td>2023/01/01</td>
                    <td>2023/01/07</td>
                    <td>13:00</td>
                    <td>14:00</td>
                    <td>12</td>
                    <td>
                        <a href="#">[비활성]</a>
                        <a href="#">[활성]</a>
                    </td>
                </tr>
                <tr>
                    <td><input type="checkbox" name="배너번호"/></td>
                    <td>201603292</td>
                    <td><img src="../../images/slider_item4.jpg" class="thumb"></td>
                    <td>
                        <ul>
                            <li class="name">배너이름</li>
                            <li class="size">크기 : 985 x 447</li>
                            <li class="link"><a href="#">배너링크</a></li>
                        </ul>
                    </td>
                    <td>메인 - 슬라이더</td>
                    <td>2023/01/01</td>
                    <td>2023/01/07</td>
                    <td>13:00</td>
                    <td>14:00</td>
                    <td>12</td>
                    <td>
                        <a href="#">[비활성]</a>
                        <a href="#">[활성]</a>
                    </td>
                </tr>
            </table>
            <input type="button" class="btnNegative" value="선택삭제"/>
            <input type="button" class="btnPositive btnRegister" value="등록하기"/>
        </section>

        <!-- 상품 상세보기 배너-->
        <section id="tabs3">
            <h4>상품 상세보기 배너</h4>
            <p>
                상품 상세보기 상품수량 입력 상단부에 노출되는 배너입니다.
            </p>
            <table>
                <tr>
                    <th><input type="checkbox" name="all"/></th>
                    <th>배너번호</th>
                    <th>이미지</th>
                    <th>배너정보</th>
                    <th>배너위치</th>
                    <th>시작날짜</th>
                    <th>종료날짜</th>
                    <th>시작시간</th>
                    <th>종료시간</th>
                    <th>조회</th>
                    <th>관리</th>
                </tr>
                <tr>
                    <td><input type="checkbox" name="배너번호"/></td>
                    <td>201603292</td>
                    <td><img src="../../images/vip_plcc_banner.png" class="thumb"></td>
                    <td>
                        <ul>
                            <li class="name">배너이름</li>
                            <li class="size">크기 : 456 x 60</li>
                            <li class="link"><a href="#">배너링크</a></li>
                        </ul>
                    </td>
                    <td>상품 - 상세보기</td>
                    <td>2023/01/01</td>
                    <td>2023/01/07</td>
                    <td>13:00</td>
                    <td>14:00</td>
                    <td>12</td>
                    <td>
                        <a href="#">[비활성]</a>
                        <a href="#">[활성]</a>
                    </td>
                </tr>
            </table>
            <input type="button" class="btnNegative" value="선택삭제"/>
            <input type="button" class="btnPositive btnRegister" value="등록하기"/>
        </section>

        <!-- 회원 로그인 배너-->
        <section id="tabs4">
            <h4>회원 로그인 배너</h4>
            <p>
                회원 로그인 폼 오른쪽에 노출되는 배너입니다.
            </p>
            <table>
                <tr>
                    <th><input type="checkbox" name="all"/></th>
                    <th>배너번호</th>
                    <th>이미지</th>
                    <th>배너정보</th>
                    <th>배너위치</th>
                    <th>시작날짜</th>
                    <th>종료날짜</th>
                    <th>시작시간</th>
                    <th>종료시간</th>
                    <th>조회</th>
                    <th>관리</th>
                </tr>
                <tr>
                    <td><input type="checkbox" name="배너번호"/></td>
                    <td>201603292</td>
                    <td><img src="/member/images/member_login_banner.jpg" class="thumb"></td>
                    <td>
                        <ul>
                            <li class="name">배너이름</li>
                            <li class="size">크기 : 425 x 260</li>
                            <li class="link"><a href="#">배너링크</a></li>
                        </ul>
                    </td>
                    <td>회원 - 로그인</td>
                    <td>2023/01/01</td>
                    <td>2023/01/07</td>
                    <td>13:00</td>
                    <td>14:00</td>
                    <td>12</td>
                    <td>
                        <a href="#">[비활성]</a>
                        <a href="#">[활성]</a>
                    </td>
                </tr>
            </table>
            <input type="button" class="btnNegative" value="선택삭제"/>
            <input type="button" class="btnPositive btnRegister" value="등록하기"/>
        </section>

        <!-- 마이페이지 배너-->
        <section id="tabs5">
            <h4>마이페이지 배너</h4>
            <p>
                마이페이지 하위 모든 페이지에서 노출되는 배너입니다.
            </p>
            <table>
                <tr>
                    <th><input type="checkbox" name="all"/></th>
                    <th>배너번호</th>
                    <th>이미지</th>
                    <th>배너정보</th>
                    <th>배너위치</th>
                    <th>시작날짜</th>
                    <th>종료날짜</th>
                    <th>시작시간</th>
                    <th>종료시간</th>
                    <th>조회</th>
                    <th>관리</th>
                </tr>
                <tr>
                    <td><input type="checkbox" name="배너번호"/></td>
                    <td>201603292</td>
                    <td><img src="/my/images/my_banner1.jpg" class="thumb"></td>
                    <td>
                        <ul>
                            <li class="name">배너이름</li>
                            <li class="size">크기 : 810 x 86</li>
                            <li class="link"><a href="#">배너링크</a></li>
                        </ul>
                    </td>
                    <td>마이페이지</td>
                    <td>2023/01/01</td>
                    <td>2023/01/07</td>
                    <td>13:00</td>
                    <td>14:00</td>
                    <td>12</td>
                    <td>
                        <a href="#">[비활성]</a>
                        <a href="#">[활성]</a>
                    </td>
                </tr>
                <tr>
                    <td><input type="checkbox" name="배너번호"/></td>
                    <td>201603292</td>
                    <td><img src="/my/images/my_banner2.png" class="thumb"></td>
                    <td>
                        <ul>
                            <li class="name">배너이름</li>
                            <li class="size">크기 : 810 x 86</li>
                            <li class="link"><a href="#">배너링크</a></li>
                        </ul>
                    </td>
                    <td>마이페이지</td>
                    <td>2023/01/01</td>
                    <td>2023/01/07</td>
                    <td>13:00</td>
                    <td>14:00</td>
                    <td>12</td>
                    <td>
                        <a href="#">[비활성]</a>
                        <a href="#">[활성]</a>
                    </td>
                </tr>
            </table>
            <input type="button" class="btnNegative" value="선택삭제"/>
            <input type="button" class="btnPositive btnRegister" value="등록하기"/>
        </section>
    </article>
    <p class="ico info">
        <strong>Tip!</strong>
        전자상거래 등에서의 상품 등의 정보제공에 관한 고시에 따라 총 35개 상품군에 대해 상품 특성 등을 양식에 따라 입력할 수 있습니다.
    </p>
</section>
</html>